---
sidebar_position: 10
description: Validation exercises for understanding URDF structure
---

# URDF Validation Exercises

## Learning Objectives
- Apply URDF knowledge through structured validation exercises
- Test understanding of URDF structure and elements
- Practice identifying and correcting URDF issues
- Demonstrate proficiency in URDF analysis

## Exercise 1: URDF Structure Analysis

### Task
Analyze the following URDF snippet and answer the questions below:

```xml
<robot name="test_robot">
  <link name="base_link">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0.0 0.0 1.0 1.0"/>
      </material>
    </visual>
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>

  <link name="upper_arm">
    <visual>
      <geometry>
        <cylinder radius="0.05" length="0.4"/>
      </geometry>
      <material name="grey">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
    <inertial>
      <mass value="1.5"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.005"/>
    </inertial>
  </link>

  <joint name="shoulder_joint" type="revolute">
    <parent link="base_link"/>
    <child link="upper_arm"/>
    <origin xyz="0.0 0.0 0.2" rpy="0.0 0.0 0.0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="20" velocity="2"/>
  </joint>
</robot>
```

### Questions
1. How many links does this robot have?
2. What is the name of the base link?
3. What type of joint connects the base to the upper arm?
4. What is the range of motion for the shoulder joint?
5. What is the mass of the upper arm link?

### Answers
1. 2 links (base_link and upper_arm)
2. base_link
3. Revolute joint
4. -1.57 to 1.57 radians (±90 degrees)
5. 1.5 kg

## Exercise 2: Error Identification

### Task
Identify the errors in the following URDF snippet:

```xml
<robot name="broken_robot">
  <link name="base">
    <visual>
      <geometry>
        <box size="1 1 1"/>
      </geometry>
    </visual>
    <!-- Missing inertial element -->
  </link>

  <link name="arm">
    <inertial>
      <mass value="-1.0"/>  <!-- Negative mass -->
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>  <!-- Zero inertia -->
    </inertial>
  </link>

  <joint name="bad_joint" type="revolute">
    <parent link="nonexistent"/>  <!-- Non-existent parent -->
    <child link="arm"/>
    <limit lower="1.0" upper="-1.0" effort="10" velocity="1"/>  <!-- Invalid limits -->
  </joint>

  <link name="orphan">  <!-- Link not connected to structure -->
    <visual>
      <geometry><sphere radius="0.1"/></geometry>
    </visual>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
</robot>
```

### Errors Found
1. **Missing inertial element** in the "base" link
2. **Negative mass value** (-1.0) in the "arm" link
3. **Zero inertia values** in the "arm" link (unphysical)
4. **Non-existent parent link** ("nonexistent") in bad_joint
5. **Invalid joint limits** (lower > upper: 1.0 > -1.0)
6. **Disconnected link** ("orphan" link not connected to kinematic structure)

### Corrected Version
```xml
<robot name="fixed_robot">
  <link name="base">
    <visual>
      <geometry>
        <box size="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <link name="arm">
    <visual>
      <geometry>
        <cylinder radius="0.05" length="0.3"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.05"/>
    </inertial>
  </link>

  <joint name="good_joint" type="revolute">
    <parent link="base"/>
    <child link="arm"/>
    <origin xyz="0.0 0.0 0.5"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.0" upper="1.0" effort="10" velocity="1"/>
  </joint>
</robot>
```

## Exercise 3: URDF Modification Challenge

### Task
Modify the given simple robot to add a forearm segment, making it a 2-segment arm.

**Starting URDF:**
```xml
<robot name="simple_arm">
  <link name="base">
    <visual>
      <geometry><cylinder radius="0.05" length="0.1"/></geometry>
    </visual>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.0005"/>
    </inertial>
  </link>

  <link name="upper_arm">
    <visual>
      <origin xyz="0 0 -0.15"/>
      <geometry><cylinder radius="0.04" length="0.3"/></geometry>
    </visual>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.002"/>
    </inertial>
  </link>

  <joint name="shoulder" type="revolute">
    <parent link="base"/>
    <child link="upper_arm"/>
    <origin xyz="0 0 0.05"/>
    <axis xyz="1 0 0"/>
    <limit lower="-1.57" upper="1.57"/>
  </joint>
</robot>
```

### Requirements
- Add a "forearm" link
- Add an "elbow" joint connecting upper_arm to forearm
- Make the forearm 25cm long
- Ensure proper inertial properties
- Maintain the kinematic chain

### Solution
```xml
<robot name="extended_arm">
  <link name="base">
    <visual>
      <geometry><cylinder radius="0.05" length="0.1"/></geometry>
    </visual>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.0005"/>
    </inertial>
  </link>

  <link name="upper_arm">
    <visual>
      <origin xyz="0 0 -0.15"/>
      <geometry><cylinder radius="0.04" length="0.3"/></geometry>
    </visual>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.002"/>
    </inertial>
  </link>

  <link name="forearm">
    <visual>
      <origin xyz="0 0 -0.125"/>  <!-- Center origin for 0.25m length -->
      <geometry><cylinder radius="0.03" length="0.25"/></geometry>
    </visual>
    <inertial>
      <mass value="0.8"/>
      <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="shoulder" type="revolute">
    <parent link="base"/>
    <child link="upper_arm"/>
    <origin xyz="0 0 0.05"/>
    <axis xyz="1 0 0"/>
    <limit lower="-1.57" upper="1.57"/>
  </joint>

  <joint name="elbow" type="revolute">
    <parent link="upper_arm"/>
    <child link="forearm"/>
    <origin xyz="0 0 -0.3"/>  <!-- Position at end of upper arm -->
    <axis xyz="1 0 0"/>
    <limit lower="-1.57" upper="1.57"/>
  </joint>
</robot>
```

## Exercise 4: Validation Tool Practice

### Task
Practice using URDF validation tools with the following files:

**File 1 (valid.urdf):**
```xml
<robot name="valid_robot">
  <link name="base_link">
    <visual>
      <geometry><box size="0.2 0.2 0.2"/></geometry>
    </visual>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.02"/>
    </inertial>
  </link>
</robot>
```

**File 2 (invalid.urdf):**
```xml
<robot name="invalid_robot">
  <link name="base">
    <visual>
      <geometry><box size="1 1 1"/>
    </visual>
    <!-- Missing inertial -->
  </link>
  <!-- Missing joint -->
</robot>
```

### Validation Commands
```bash
# Validate the valid robot
check_urdf valid.urdf
# Expected: "Successfully Parsed!"

# Validate the invalid robot
check_urdf invalid.urdf
# Expected: Error message about missing inertial
```

## Exercise 5: Kinematic Chain Tracing

### Task
For the following URDF, trace the complete kinematic chain from base to end effector:

```xml
<robot name="serial_arm">
  <link name="base_link">
    <visual><geometry><cylinder radius="0.1" length="0.2"/></visual>
    <inertial><mass value="2.0"/><inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.01"/></inertial>
  </link>

  <link name="link1">
    <visual><geometry><cylinder radius="0.05" length="0.3"/></visual>
    <inertial><mass value="1.5"/><inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.005"/></inertial>
  </link>

  <link name="link2">
    <visual><geometry><cylinder radius="0.04" length="0.25"/></visual>
    <inertial><mass value="1.0"/><inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.003"/></inertial>
  </link>

  <link name="end_effector">
    <visual><geometry><sphere radius="0.05"/></visual>
    <inertial><mass value="0.2"/><inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/></inertial>
  </link>

  <joint name="joint1" type="revolute">
    <parent link="base_link"/><child link="link1"/>
    <origin xyz="0 0 0.1"/><axis xyz="0 0 1"/>
    <limit lower="-3.14" upper="3.14" effort="20" velocity="1"/>
  </joint>

  <joint name="joint2" type="revolute">
    <parent link="link1"/><child link="link2"/>
    <origin xyz="0 0 -0.3"/><axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="15" velocity="1"/>
  </joint>

  <joint name="joint3" type="revolute">
    <parent link="link2"/><child link="end_effector"/>
    <origin xyz="0 0 -0.25"/><axis xyz="1 0 0"/>
    <limit lower="-2.0" upper="2.0" effort="10" velocity="1"/>
  </joint>
</robot>
```

### Kinematic Chain
```
base_link → joint1 → link1 → joint2 → link2 → joint3 → end_effector
```

### Questions
1. How many joints are in the chain?
2. What type of joints are used?
3. What is the DOF (Degrees of Freedom) of this robot?
4. Which joint controls the end effector's up/down motion?

### Answers
1. 3 joints (joint1, joint2, joint3)
2. All are revolute joints
3. 3 DOF (one per revolute joint)
4. joint2 (rotates around Y-axis, controlling up/down motion)

## Exercise 6: Comprehensive URDF Review

### Task
Review the complete humanoid URDF below and answer the questions:

```xml
<?xml version="1.0"?>
<robot name="review_robot">
  <material name="blue">
    <color rgba="0.0 0.0 1.0 1.0"/>
  </material>
  <material name="red">
    <color rgba="1.0 0.0 0.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>

  <link name="base_link">
    <visual>
      <geometry><box size="0.001 0.001 0.001"/></geometry>
    </visual>
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>

  <link name="torso">
    <visual>
      <origin xyz="0 0 0.25"/>
      <geometry><box size="0.3 0.2 0.5"/></geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <mass value="10.0"/>
      <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.6" iyz="0.0" izz="0.3"/>
    </inertial>
  </link>

  <joint name="base_to_torso" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.25"/>
  </joint>

  <link name="head">
    <visual>
      <geometry><sphere radius="0.1"/></geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.02"/>
    </inertial>
  </link>

  <joint name="torso_to_head" type="revolute">
    <parent link="torso"/>
    <child link="head"/>
    <origin xyz="0 0 0.5"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.5" upper="0.5"/>
  </joint>
</robot>
```

### Questions
1. What is the robot's name?
2. How many materials are defined?
3. What type of joint connects the torso to the head?
4. What is the mass of the torso?
5. What are the dimensions of the torso?
6. What is the range of motion for neck rotation?
7. Is this a valid URDF structure?

### Answers
1. review_robot
2. 3 materials (blue, red, white)
3. Revolute joint
4. 10.0 kg
5. 0.3m × 0.2m × 0.5m
6. -0.5 to 0.5 radians (approximately ±28.6 degrees)
7. Yes, it has a proper tree structure with valid elements

## Self-Assessment Quiz

### Multiple Choice
1. What does URDF stand for?
   a) Universal Robot Definition Format
   b) Unified Robot Description Format
   c) Universal Robotic Data File
   d) Unified Robotic Design Framework

2. Which element is NOT required for every URDF link?
   a) visual
   b) collision
   c) inertial
   d) All of the above are required

3. What type of joint allows continuous rotation?
   a) Fixed
   b) Revolute
   c) Continuous
   d) Prismatic

### True/False
4. T/F: All URDF measurements must be in meters.
5. T/F: A URDF robot can have multiple base links.
6. T/F: Joint limits must have lower < upper.

### Answers
1. b) Unified Robot Description Format
2. b) collision (visual and inertial are required, collision is optional but recommended)
3. c) Continuous
4. T (all measurements in URDF are in meters)
5. F (only one base link in a tree structure)
6. T (lower limit must be less than upper limit)

## Practical Application Exercise

### Task
Create your own simple URDF for a 2-wheeled robot with the following specifications:
- Base: Box shape, 0.5m × 0.3m × 0.1m
- Wheels: Cylinders, radius 0.1m, length 0.05m
- Left wheel: 0.2m to the left of center, touching ground
- Right wheel: 0.2m to the right of center, touching ground
- All joints: Fixed (wheels don't rotate in this model)

### Solution Template
```xml
<robot name="two_wheeled_robot">
  <!-- Define materials -->
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>

  <!-- Base link -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.5 0.3 0.1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.3" iyz="0.0" izz="0.4"/>
    </inertial>
  </link>

  <!-- Left wheel -->
  <link name="left_wheel">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.0025"/>
    </inertial>
  </link>

  <!-- Right wheel -->
  <link name="right_wheel">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.0025"/>
    </inertial>
  </link>

  <!-- Joints -->
  <joint name="base_to_left_wheel" type="fixed">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <origin xyz="0.0 0.2 -0.05"/>
  </joint>

  <joint name="base_to_right_wheel" type="fixed">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <origin xyz="0.0 -0.2 -0.05"/>
  </joint>
</robot>
```

## Independent Validation

After completing these exercises, you should be able to:
1. Analyze any URDF file and identify its structure and components
2. Identify and correct common URDF errors
3. Modify URDF files to meet specific requirements
4. Validate URDF files using appropriate tools
5. Create basic URDF files from specifications

Rate your performance on these exercises:
- [ ] Structure analysis: ___/10
- [ ] Error identification: ___/10
- [ ] Modification tasks: ___/10
- [ ] Validation practice: ___/10
- [ ] Kinematic tracing: ___/10

Aim for 8/10 or higher in each category before moving to advanced topics.